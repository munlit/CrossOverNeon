// ╔═══════════════════════════════════════╗
// ║  @Ultr                                ║
// ║  CrossOver Neon                       ║
// ╚═══════════════════════════════════════╝

//@version=5
indicator("CrossOver Neon (@Ultr)", shorttitle = "CrossOver(@Ultr.)", overlay = true)

//  ═══════════════
//  ═══  Cross  ═══
//  ═══  Colors  ═══ 

// Standard Colors
//  colorAqua    = color.aqua      // #00BCD4  Aqua
//  colorBlue    = color.blue      // #2196F3  Blue
//  colorTeal    = color.teal      // #00897B  Teal
//  colorGreen   = color.green     // #4CAF50  Green
//  colorOlive   = color.olive     // #808000  Olive
//  colorLime    = color.lime      // #00E676  Lime
//  colorYellow  = color.yellow    // #FFEB3B  Yellow
//  colorOrange  = color.orange    // #FF9800  Orange
//  colorMaroon  = color.maroon    // #880E4F  Maroon
//  colorRed     = color.red       // #FF5252  Red
//  colorFuchsia = color.fuchsia   // #E040FB  Fuchsia
//  colorPurple  = color.purple    // #9C27B0  Purple
//  colorNavy    = color.navy      // #311B92  Navy
//  colorBlack   = color.black     // #363A45  Black
//  colorGray    = color.gray      // #787B86  Gray
//  colorSilver  = color.silver    // #B2B5BE  Silver
//  colorWhite   = color.white     // #FFFFFF  White

var grpColor = " ═══ Colores ═══ "
color colorZero = color.new(#e91e63, na)  // color Fucxia
color colorFirs = color.new(#33ffac, na)  // color Verde
color colorSeco = color.new(#eedd45, na)  // color Amariñllo
color colorThir = color.new(#e65100, na)  // color Naranja
color colorFour = color.new(#00ffd5, na)  // color Menta
color colorFift = color.new(#12cef8, na)  // color Celeste
color colorSixt = color.new(#0034c5, na)  // color Azul

color colorLong  = color.new(#33ffac, na)
color colorShort = color.new(#e91e63, na)

//  ═══════════════
//  ═══  Cross  ═══
//  ═══  Inputs  ═══

var grpLong  = " ═══ EMAS ═══ "
eMa8      = input.bool(defval = true, title = "", group = grpLong, inline = 'ema8')
eMa20     = input.bool(defval = true, title = "", group = grpLong, inline = 'ema20')
eMa55     = input.bool(defval = true, title = "", group = grpLong, inline = 'ema55')
eMa200    = input.bool(defval = true, title = "", group = grpLong, inline = 'ema200')

length8    = input(8,    title = "Extensión",  group = grpLong, inline = 'ema8')
length20   = input(20,   title = "Extensión",  group = grpLong, inline = 'ema20')
length55   = input(55,   title = "Extensión",  group = grpLong, inline = 'ema55')
length200  = input(200,  title = "Extensión",  group = grpLong, inline = 'ema200')

lengthFast = input(8,    title = "Min MA",      group = grpLong)
lengthSlow = input(20,   title = "Max MA",      group = grpLong)

length          = input(10)
transparencia   = input(100)

//  ═══════════════
//  ═══  Cross  ═══
//  ═══  Options  ═══

string optionMa	= input.string("SMA", "Tipo de MM", options = ["EMA", "SMA", "RMA", "WMA", "VWMA"])

//  ══════════════
//  ═══  Neon  ═══
//  ═══  Types  ═══

type OHL
    float O = open
    float H = high
    float L = low
    float C = close
    float V = volume

//  ═══════════════
//  ═══  Cross  ═══
//  ═══  Functions  ═══

ma(source, length, type) =>
    type == "SMA" ? ta.sma(source, length) :    // Media Movil Simple
     type == "EMA" ? ta.ema(source, length) :   // Media Movil Exponencial
     type == "RMA" ? ta.rma(source, length) :   // Media Movil
     type == "WMA" ? ta.wma(source, length) :   // Media Movil Ponderada
     type == "VWMA" ? ta.vwma(source, length) : // Media Movil Ponderada por volumen
     na

//  ═══════════════
//  ═══  Cross  ═══
//  ═══  Instances  ═══
ohl = OHL.new()

ma8   = ma(ohl.C, length8,    optionMa)
ma10  = ma(ohl.C, length,     optionMa)
ma20  = ma(ohl.C, length20,   optionMa)
ma55  = ma(ohl.C, length55,   optionMa)
ma200 = ma(ohl.C, length200,  optionMa)

//  ═══════════════
//  ═══  Cross  ═══
//  ═══  Math  ═══

float maHeight = ta.percentrank(ma10, 100)
float transparency = math.min(80, 100 - maHeight)

// Calculando EMAs
float maFast       = ma(ohl.C, lengthFast, OptionMa)
float maSlow       = ma(ohl.C, lengthSlow, OptionMa)

bool signal         = emaFast > emaSlow
color colorCrOver   = signal ? colorLong : colorShort

//  ═══  CrossOver  ═══
bool crossOver8     = ta.crossover(maFast, maSlow)
bool crossOver20     = ta.crossover(maFast, maSlow)

bool crossUnder     = ta.crossunder(ma8, ma20)



bool crossover = ta.crossover(emaFast, emaSlow)
bool crossunder = ta.crossunder(emaFast, emaSlow)

//  ═══════════════
//  ═══  Cross  ═══
//  ═══  Display EMAS  ═══

//  ═══  Ma 8  ═══
plot(eMa8, color = color.new(colorCrOver,80), linewidth = 8,  editable = false)
plot(eMa8, color = color.new(colorCrOver,90), linewidth = 16, editable = false)
plot(eMa8, color = color.new(colorCrOver,95), linewidth = 32, editable = false)
plot(eMa8, color = color.new(colorCrOver,98), linewidth = 40, editable = false)

//  ═══  Ma 20  ═══
plot(eMa20, color = color.new(colorCrOver,80), linewidth = 8,  editable = false)
plot(eMa20, color = color.new(colorCrOver,90), linewidth = 16, editable = false)
plot(eMa20, color = color.new(colorCrOver,95), linewidth = 32, editable = false)
plot(eMa20, color = color.new(colorCrOver,98), linewidth = 40, editable = false)

plot(eMa8 ? ma8 : na,     color = colorSeco, title = "Ma 8",   linewidth = 2)
plot(eMa20 ? ma20 : na,   color = colorThir, title = "Ma 20",  linewidth = 2)
plot(eMa55 ? ma55 : na,   color = colorFour, title = "Ma 55",  linewidth = 2, editable = false)
plot(eMa200 ? ma200 : na, color = colorSixt, title = "Ma 200", linewidth = 2, editable = false, style = plot.style_area)

//  ═══════════════
//  ═══  Cross  ═══
//  ═══  Shadow  ═══
maPlot8   = plot(ma8,  "MA 8",  editable=false, color = na)
maPlot20  = plot(ma20,  "MA 20",  editable=false, color = na)
maPlot55  = plot(ma55,  "MA 55",  editable=false, color = na)

//  20 MA
color maCrossOver20 = ma8 > ma20 ? colorLong : colorShort
fill(maPlot8, maPlot20, maCrossOver20, "CrossOver 20")

//  55 MA
color maCrossOver55 = ma8 > ma55 ? colorLong : colorShort
fill(maPlot8, maPlot55, maCrossOver55, "CrossOver 55")

//  ═══════════════
//  ═══  Cross  ═══
//  ═══  Line Cross  ═══

bool maRising  = ta.rising(ma10, 1)
color crossMa = maRising ? color.new(colorLong, transparencia-60) : color.new(colorShort, transparencia-60)
plot(ma20, "Operativa", crossMa, 4)

//  Marcas Operativas
//  buyCond = ta.crossover(ma10, ma21)
//  sellCond = ta.crossunder(ma10, ma21)

//  plotshape(series = buyCond, title = "Compra", style = shape.triangleup, location = location.belowbar, color = colorBuy, text = "Buy", size = size.tiny)
//  plotshape(series = sellCond, title = "Venta", style = shape.triangledown, location = location.abovebar, color = colorSell, text = "Sell", size = size.tiny)
